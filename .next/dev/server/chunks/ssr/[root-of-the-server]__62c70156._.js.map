{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///D:/Akshat%20Singh/SideProjIdeas/Desi-Ngl/pages/%5Busername%5D.js"],"sourcesContent":["import { useRouter } from 'next/router'\nimport { useState } from 'react'\nimport axios from 'axios'\nimport toast from 'react-hot-toast'\nimport { Send, Flame, Heart, Smile, AlertCircle, MessageSquare, Copy, Check } from 'lucide-react'\n\n\n\nexport default function MessagePage() {\n  const router = useRouter()\n  const { username } = router.query\n  const [msg, setMsg] = useState('')\n  const [mood, setMood] = useState('Serious')\n  const [sending, setSending] = useState(false)\n  // Whether the sender wants to share location & device hints\n  const [shareHints, setShareHints] = useState(false)\n  // Store the view token after sending\n  const [viewToken, setViewToken] = useState(null)\n  const [copied, setCopied] = useState(false)\n\n  const moods = [\n    { id: 'Serious', icon: <AlertCircle size={16} />, color: '#666' },\n    { id: 'Fun', icon: <Smile size={16} />, color: '#FFD700' },\n    { id: 'Advice', icon: <Heart size={16} />, color: '#FF69B4' },\n    { id: 'Roast', icon: <Flame size={16} />, color: '#FF4500' },\n  ]\n\n  async function sendMessage() {\n    if (!msg.trim()) return toast.error('Please enter a message.')\n    const u = username || ''\n    setSending(true)\n    try {\n      const res = await axios.post(`/api/${encodeURIComponent(u)}`, { \n        message: msg, \n        mood,\n        shareMeta: shareHints\n      })\n      toast.success('Message Sent!')\n      setMsg('')\n      // Store the view token so sender can check replies\n      if (res.data?.senderToken) {\n        setViewToken(res.data.senderToken)\n      }\n    } catch (e) {\n      toast.error('Error: ' + (e?.response?.data?.error || e.message))\n    } finally {\n      setSending(false)\n    }\n  }\n\n  function copyViewLink() {\n    if (!viewToken) return\n    const viewUrl = `${window.location.origin}/view/${viewToken}`\n    navigator.clipboard.writeText(viewUrl)\n    setCopied(true)\n    toast.success('Link copied!')\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  return (\n    <div className=\"container\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', minHeight: '100vh', padding: '20px' }}>\n\n      <div style={{\n        background: 'var(--glass-bg)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid var(--glass-border)',\n        borderRadius: '24px',\n        padding: '30px',\n        width: '100%',\n        maxWidth: '500px',\n        boxShadow: '0 20px 40px rgba(0,0,0,0.2)'\n      }}>\n        <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n          <p style={{ color: 'var(--text-secondary)', fontSize: '14px', margin: 0 }}>Send a text to</p>\n          <h1 style={{ fontSize: '32px', margin: '5px 0 0 0', fontWeight: 800 }}>@{username}</h1>\n        </div>\n\n        <textarea\n          value={msg}\n          onChange={e => setMsg(e.target.value)}\n          placeholder=\"Send me an anonymous message...\"\n          style={{\n            width: '100%',\n            height: '150px',\n            padding: '16px',\n            borderRadius: '16px',\n            border: '1px solid var(--glass-border)',\n            background: 'var(--surface-color)',\n            color: '#fff',\n            fontSize: '16px',\n            fontFamily: 'inherit',\n            resize: 'none',\n            outline: 'none',\n            marginBottom: '20px'\n          }}\n        />\n\n        <div style={{ display: 'flex', gap: '8px', marginBottom: '20px', flexWrap: 'wrap', justifyContent: 'center' }}>\n          {moods.map(m => (\n            <button\n              key={m.id}\n              onClick={() => setMood(m.id)}\n              style={{\n                background: mood === m.id ? 'var(--text-primary)' : 'rgba(255,255,255,0.05)',\n                color: mood === m.id ? 'var(--bg-color)' : 'var(--text-secondary)',\n                border: `1px solid ${mood === m.id ? 'var(--text-primary)' : 'var(--glass-border)'}`,\n                padding: '8px 16px',\n                borderRadius: '100px',\n                fontSize: '13px',\n                fontWeight: 600,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n                transition: 'all 0.2s'\n              }}\n            >\n              {m.icon} {m.id}\n            </button>\n          ))}\n        </div>\n\n        {/* Privacy choice: fully anonymous vs share location & device hints */}\n        <div style={{\n          marginBottom: '20px',\n          padding: '12px 14px',\n          borderRadius: '16px',\n          border: '1px solid var(--glass-border)',\n          background: 'rgba(0,0,0,0.3)',\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '10px'\n        }}>\n          <p style={{ \n            margin: 0, \n            fontSize: '13px', \n            color: 'var(--text-secondary)', \n            fontWeight: 500 \n          }}>\n            Choose how anonymous you want to be:\n          </p>\n\n          <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n            <button\n              type=\"button\"\n              onClick={() => setShareHints(false)}\n              style={{\n                flex: 1,\n                minWidth: '120px',\n                padding: '8px 10px',\n                borderRadius: '999px',\n                border: shareHints ? '1px solid var(--glass-border)' : '1px solid var(--accent-purple)',\n                background: shareHints ? 'rgba(255,255,255,0.02)' : 'rgba(138, 43, 226, 0.2)',\n                color: shareHints ? 'var(--text-secondary)' : '#fff',\n                fontSize: '12px',\n                fontWeight: 600,\n                cursor: 'pointer',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'flex-start',\n                gap: '2px',\n                transition: 'all 0.2s'\n              }}\n            >\n              <span>Stay 100% Anonymous</span>\n              <span style={{ fontSize: '11px', opacity: 0.8 }}>No device or location hints shown</span>\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setShareHints(true)}\n              style={{\n                flex: 1,\n                minWidth: '120px',\n                padding: '8px 10px',\n                borderRadius: '999px',\n                border: shareHints ? '1px solid var(--accent-purple)' : '1px solid var(--glass-border)',\n                background: shareHints ? 'rgba(138, 43, 226, 0.25)' : 'rgba(255,255,255,0.02)',\n                color: '#fff',\n                fontSize: '12px',\n                fontWeight: 600,\n                cursor: 'pointer',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'flex-start',\n                gap: '2px',\n                transition: 'all 0.2s'\n              }}\n            >\n              <span>Share Hints</span>\n              <span style={{ fontSize: '11px', opacity: 0.8 }}>Lets them see your device & IP-based location hint</span>\n            </button>\n          </div>\n\n          <p style={{ \n            margin: 0, \n            fontSize: '11px', \n            color: 'var(--text-secondary)', \n            opacity: 0.9 \n          }}>\n            Your real name and exact details are never shown. Location is estimated from IP, and only visible to @{username}.\n          </p>\n        </div>\n\n        <button\n          onClick={sendMessage}\n          disabled={sending}\n          style={{\n            padding: '16px',\n            width: '100%',\n            background: 'var(--text-primary)',\n            color: '#000',\n            border: 'none',\n            borderRadius: '12px',\n            fontSize: '16px',\n            fontWeight: 800,\n            opacity: sending ? 0.7 : 1,\n            transition: 'transform 0.1s',\n            cursor: sending ? 'wait' : 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: '8px'\n          }}\n          onMouseDown={e => !sending && (e.currentTarget.style.transform = 'scale(0.98)')}\n          onMouseUp={e => !sending && (e.currentTarget.style.transform = 'scale(1)')}\n        >\n          {sending ? 'Sending...' : <>Send Message <Send size={18} /></>}\n        </button>\n\n        {/* View Replies Link - shown after sending */}\n        {viewToken && (\n          <div style={{\n            marginTop: '20px',\n            padding: '16px',\n            background: 'rgba(139, 92, 246, 0.1)',\n            border: '1px solid rgba(139, 92, 246, 0.3)',\n            borderRadius: '12px',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '12px'\n          }}>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              marginBottom: '4px'\n            }}>\n              <MessageSquare size={18} color=\"var(--accent-purple)\" />\n              <span style={{\n                fontSize: '14px',\n                fontWeight: 600,\n                color: 'var(--accent-purple)'\n              }}>\n                View Replies\n              </span>\n            </div>\n            <p style={{\n              margin: 0,\n              fontSize: '12px',\n              color: 'var(--text-secondary)',\n              lineHeight: '1.5'\n            }}>\n              Save this link to check for replies to your message later!\n            </p>\n            <div style={{\n              display: 'flex',\n              gap: '8px',\n              alignItems: 'center'\n            }}>\n              <a\n                href={`/view/${viewToken}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                style={{\n                  flex: 1,\n                  padding: '10px 14px',\n                  background: 'var(--accent-purple)',\n                  color: '#fff',\n                  borderRadius: '8px',\n                  fontSize: '13px',\n                  fontWeight: 600,\n                  textDecoration: 'none',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '6px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseEnter={e => e.currentTarget.style.background = 'rgba(139, 92, 246, 0.9)'}\n                onMouseLeave={e => e.currentTarget.style.background = 'var(--accent-purple)'}\n              >\n                Open Replies Page\n              </a>\n              <button\n                onClick={copyViewLink}\n                style={{\n                  padding: '10px 14px',\n                  background: 'rgba(255,255,255,0.1)',\n                  border: '1px solid var(--glass-border)',\n                  borderRadius: '8px',\n                  color: '#fff',\n                  cursor: 'pointer',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '6px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseEnter={e => e.currentTarget.style.background = 'rgba(255,255,255,0.15)'}\n                onMouseLeave={e => e.currentTarget.style.background = 'rgba(255,255,255,0.1)'}\n              >\n                {copied ? <Check size={16} /> : <Copy size={16} />}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <p style={{ marginTop: '30px', color: 'var(--text-secondary)', fontSize: '13px' }}>\n        <a href=\"/\" style={{ textDecoration: 'underline' }}>Get your own messages</a>\n      </p>\n\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}