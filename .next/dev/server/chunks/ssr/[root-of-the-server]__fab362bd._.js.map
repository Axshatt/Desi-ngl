{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///D:/Akshat%20Singh/SideProjIdeas/Desi-Ngl/pages/status/%5Bid%5D.js"],"sourcesContent":["import { useRouter } from 'next/router'\r\nimport { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport toast from 'react-hot-toast'\r\nimport { Ghost, Shield, ShieldCheck, ShieldOff, ArrowLeft, Zap } from 'lucide-react'\r\n\r\nexport default function StatusPage() {\r\n    const router = useRouter()\r\n    const { id } = router.query\r\n    const [data, setData] = useState(null)\r\n    const [loading, setLoading] = useState(true)\r\n    const [acting, setActing] = useState(false)\r\n\r\n    async function fetchStatus() {\r\n        if (!id) return\r\n        try {\r\n            const res = await axios.get(`/api/message/status?id=${id}`)\r\n            setData(res.data)\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (router.isReady) fetchStatus()\r\n    }, [router.isReady, id])\r\n\r\n    async function setConsent(choice) {\r\n        setActing(true)\r\n        try {\r\n            await axios.post('/api/message/consent', { id, choice })\r\n            toast.success(choice === 'revealed' ? 'Identity Revealed!' : 'Identity Hidden')\r\n            fetchStatus()\r\n        } catch (e) {\r\n            toast.error('Action failed')\r\n        } finally {\r\n            setActing(false)\r\n        }\r\n    }\r\n\r\n    if (loading) return <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>Loading...</div>\r\n    if (!data) return <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>Message not found</div>\r\n\r\n    return (\r\n        <div className=\"container\" style={{ padding: '40px 20px', minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n            <button\r\n                onClick={() => router.back()}\r\n                style={{ alignSelf: 'flex-start', background: 'none', border: 'none', color: 'var(--text-secondary)', display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', marginBottom: '30px' }}\r\n            >\r\n                <ArrowLeft size={18} /> Back\r\n            </button>\r\n\r\n            <div style={{\r\n                background: 'var(--glass-bg)',\r\n                border: '1px solid var(--glass-border)',\r\n                borderRadius: '32px',\r\n                padding: '40px',\r\n                width: '100%',\r\n                maxWidth: '600px',\r\n                boxShadow: '0 20px 40px rgba(0,0,0,0.3)'\r\n            }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '20px', opacity: 0.7 }}>\r\n                    <Ghost size={20} />\r\n                    <span style={{ fontSize: '14px', fontWeight: 600 }}>ANONYMOUS MESSAGE</span>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '24px', fontWeight: 500, lineHeight: 1.4, marginBottom: '40px' }}>\r\n                    \"{data.message}\"\r\n                </p>\r\n\r\n                {data.reply ? (\r\n                    <div style={{\r\n                        background: 'var(--surface-color)',\r\n                        padding: '30px',\r\n                        borderRadius: '24px',\r\n                        border: '1px solid var(--accent-purple)',\r\n                        marginBottom: '30px',\r\n                        position: 'relative'\r\n                    }}>\r\n                        <div style={{ position: 'absolute', top: '-12px', left: '20px', background: 'var(--accent-purple)', color: '#fff', fontSize: '11px', fontWeight: 800, padding: '4px 12px', borderRadius: '100px' }}>\r\n                            REPLY FROM @{data.username}\r\n                        </div>\r\n                        <p style={{ margin: 0, fontSize: '18px', lineHeight: 1.6 }}>{data.reply}</p>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ textAlign: 'center', padding: '40px', border: '1px dashed var(--glass-border)', borderRadius: '24px', color: 'var(--text-secondary)' }}>\r\n                        Waiting for a reply...\r\n                    </div>\r\n                )}\r\n\r\n                {data.reply && data.senderConsent === 'pending' && (\r\n                    <div style={{\r\n                        marginTop: '40px',\r\n                        padding: '30px',\r\n                        background: 'rgba(255,255,255,0.02)',\r\n                        borderRadius: '24px',\r\n                        border: '1px solid var(--glass-border)',\r\n                        textAlign: 'center'\r\n                    }}>\r\n                        <Shield size={32} style={{ marginBottom: '15px', color: 'var(--accent-lime)' }} />\r\n                        <h3 style={{ margin: '0 0 10px 0', fontSize: '20px' }}>Reveal your identity?</h3>\r\n                        <p style={{ color: 'var(--text-secondary)', fontSize: '14px', marginBottom: '20px', lineHeight: 1.5 }}>\r\n                            The receiver can only see who you are if they have a Premium account and you explicitly consent.\r\n                        </p>\r\n                        <div style={{ display: 'flex', gap: '15px' }}>\r\n                            <button\r\n                                disabled={acting}\r\n                                onClick={() => setConsent('declined')}\r\n                                style={{ flex: 1, padding: '14px', borderRadius: '12px', background: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid var(--glass-border)', fontWeight: 600, cursor: 'pointer' }}\r\n                            >\r\n                                Stay Private\r\n                            </button>\r\n                            <button\r\n                                disabled={acting}\r\n                                onClick={() => setConsent('revealed')}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '14px',\r\n                                    borderRadius: '12px',\r\n                                    background: 'var(--accent-purple)',\r\n                                    color: '#fff',\r\n                                    border: 'none',\r\n                                    fontWeight: 800,\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    gap: '8px'\r\n                                }}\r\n                            >\r\n                                Reveal Me <Zap size={16} fill=\"currentColor\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {data.senderConsent !== 'pending' && (\r\n                    <div style={{ marginTop: '40px', textAlign: 'center', padding: '20px', background: 'rgba(255,255,255,0.03)', borderRadius: '16px', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                        {data.senderConsent === 'revealed' ? (\r\n                            <><ShieldCheck size={20} color=\"var(--accent-lime)\" /> <span style={{ color: 'var(--accent-lime)', fontWeight: 600 }}>You've chosen to reveal your identity.</span></>\r\n                        ) : (\r\n                            <><ShieldOff size={20} color=\"#ff4444\" /> <span style={{ color: '#ff4444', fontWeight: 600 }}>You're staying anonymous permanently.</span></>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;AAEe,SAAS;IACpB,MAAM,SAAS,IAAA,mJAAS;IACxB,MAAM,EAAE,EAAE,EAAE,GAAG,OAAO,KAAK;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,eAAe;QACX,IAAI,CAAC,IAAI;QACT,IAAI;YACA,MAAM,MAAM,MAAM,gLAAK,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,IAAI;YAC1D,QAAQ,IAAI,IAAI;QACpB,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,gHAAS,EAAC;QACN,IAAI,OAAO,OAAO,EAAE;IACxB,GAAG;QAAC,OAAO,OAAO;QAAE;KAAG;IAEvB,eAAe,WAAW,MAAM;QAC5B,UAAU;QACV,IAAI;YACA,MAAM,gLAAK,CAAC,IAAI,CAAC,wBAAwB;gBAAE;gBAAI;YAAO;YACtD,gOAAK,CAAC,OAAO,CAAC,WAAW,aAAa,uBAAuB;YAC7D;QACJ,EAAE,OAAO,GAAG;YACR,gOAAK,CAAC,KAAK,CAAC;QAChB,SAAU;YACN,UAAU;QACd;IACJ;IAEA,IAAI,SAAS,qBAAO,qKAAC;QAAI,OAAO;YAAE,WAAW;YAAS,SAAS;YAAQ,YAAY;YAAU,gBAAgB;QAAS;kBAAG;;;;;;IACzH,IAAI,CAAC,MAAM,qBAAO,qKAAC;QAAI,OAAO;YAAE,WAAW;YAAS,SAAS;YAAQ,YAAY;YAAU,gBAAgB;QAAS;kBAAG;;;;;;IAEvH,qBACI,qKAAC;QAAI,WAAU;QAAY,OAAO;YAAE,SAAS;YAAa,WAAW;YAAS,SAAS;YAAQ,eAAe;YAAU,YAAY;QAAS;;0BACzI,qKAAC;gBACG,SAAS,IAAM,OAAO,IAAI;gBAC1B,OAAO;oBAAE,WAAW;oBAAc,YAAY;oBAAQ,QAAQ;oBAAQ,OAAO;oBAAyB,SAAS;oBAAQ,YAAY;oBAAU,KAAK;oBAAO,QAAQ;oBAAW,cAAc;gBAAO;;kCAEjM,qKAAC,qOAAS;wBAAC,MAAM;;;;;;oBAAM;;;;;;;0BAG3B,qKAAC;gBAAI,OAAO;oBACR,YAAY;oBACZ,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,OAAO;oBACP,UAAU;oBACV,WAAW;gBACf;;kCACI,qKAAC;wBAAI,OAAO;4BAAE,SAAS;4BAAQ,YAAY;4BAAU,KAAK;4BAAQ,cAAc;4BAAQ,SAAS;wBAAI;;0CACjG,qKAAC,qNAAK;gCAAC,MAAM;;;;;;0CACb,qKAAC;gCAAK,OAAO;oCAAE,UAAU;oCAAQ,YAAY;gCAAI;0CAAG;;;;;;;;;;;;kCAGxD,qKAAC;wBAAE,OAAO;4BAAE,UAAU;4BAAQ,YAAY;4BAAK,YAAY;4BAAK,cAAc;wBAAO;;4BAAG;4BAClF,KAAK,OAAO;4BAAC;;;;;;;oBAGlB,KAAK,KAAK,iBACP,qKAAC;wBAAI,OAAO;4BACR,YAAY;4BACZ,SAAS;4BACT,cAAc;4BACd,QAAQ;4BACR,cAAc;4BACd,UAAU;wBACd;;0CACI,qKAAC;gCAAI,OAAO;oCAAE,UAAU;oCAAY,KAAK;oCAAS,MAAM;oCAAQ,YAAY;oCAAwB,OAAO;oCAAQ,UAAU;oCAAQ,YAAY;oCAAK,SAAS;oCAAY,cAAc;gCAAQ;;oCAAG;oCACnL,KAAK,QAAQ;;;;;;;0CAE9B,qKAAC;gCAAE,OAAO;oCAAE,QAAQ;oCAAG,UAAU;oCAAQ,YAAY;gCAAI;0CAAI,KAAK,KAAK;;;;;;;;;;;6CAG3E,qKAAC;wBAAI,OAAO;4BAAE,WAAW;4BAAU,SAAS;4BAAQ,QAAQ;4BAAkC,cAAc;4BAAQ,OAAO;wBAAwB;kCAAG;;;;;;oBAKzJ,KAAK,KAAK,IAAI,KAAK,aAAa,KAAK,2BAClC,qKAAC;wBAAI,OAAO;4BACR,WAAW;4BACX,SAAS;4BACT,YAAY;4BACZ,cAAc;4BACd,QAAQ;4BACR,WAAW;wBACf;;0CACI,qKAAC,wNAAM;gCAAC,MAAM;gCAAI,OAAO;oCAAE,cAAc;oCAAQ,OAAO;gCAAqB;;;;;;0CAC7E,qKAAC;gCAAG,OAAO;oCAAE,QAAQ;oCAAc,UAAU;gCAAO;0CAAG;;;;;;0CACvD,qKAAC;gCAAE,OAAO;oCAAE,OAAO;oCAAyB,UAAU;oCAAQ,cAAc;oCAAQ,YAAY;gCAAI;0CAAG;;;;;;0CAGvG,qKAAC;gCAAI,OAAO;oCAAE,SAAS;oCAAQ,KAAK;gCAAO;;kDACvC,qKAAC;wCACG,UAAU;wCACV,SAAS,IAAM,WAAW;wCAC1B,OAAO;4CAAE,MAAM;4CAAG,SAAS;4CAAQ,cAAc;4CAAQ,YAAY;4CAA0B,OAAO;4CAAQ,QAAQ;4CAAiC,YAAY;4CAAK,QAAQ;wCAAU;kDAC7L;;;;;;kDAGD,qKAAC;wCACG,UAAU;wCACV,SAAS,IAAM,WAAW;wCAC1B,OAAO;4CACH,MAAM;4CACN,SAAS;4CACT,cAAc;4CACd,YAAY;4CACZ,OAAO;4CACP,QAAQ;4CACR,YAAY;4CACZ,QAAQ;4CACR,SAAS;4CACT,YAAY;4CACZ,gBAAgB;4CAChB,KAAK;wCACT;;4CACH;0DACa,qKAAC,+MAAG;gDAAC,MAAM;gDAAI,MAAK;;;;;;;;;;;;;;;;;;;;;;;;oBAM7C,KAAK,aAAa,KAAK,2BACpB,qKAAC;wBAAI,OAAO;4BAAE,WAAW;4BAAQ,WAAW;4BAAU,SAAS;4BAAQ,YAAY;4BAA0B,cAAc;4BAAQ,SAAS;4BAAQ,YAAY;4BAAU,gBAAgB;4BAAU,KAAK;wBAAO;kCAC3M,KAAK,aAAa,KAAK,2BACpB;;8CAAE,qKAAC,2OAAW;oCAAC,MAAM;oCAAI,OAAM;;;;;;gCAAuB;8CAAC,qKAAC;oCAAK,OAAO;wCAAE,OAAO;wCAAsB,YAAY;oCAAI;8CAAG;;;;;;;yDAEtH;;8CAAE,qKAAC,qOAAS;oCAAC,MAAM;oCAAI,OAAM;;;;;;gCAAY;8CAAC,qKAAC;oCAAK,OAAO;wCAAE,OAAO;wCAAW,YAAY;oCAAI;8CAAG;;;;;;;;;;;;;;;;;;;;;;;;;AAO1H"}}]
}