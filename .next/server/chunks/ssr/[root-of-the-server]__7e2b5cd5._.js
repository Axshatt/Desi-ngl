module.exports=[28280,a=>{"use strict";let b=(0,a.i(36580).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],28280)},55228,a=>{"use strict";let b=(0,a.i(36580).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);a.s(["RefreshCcw",()=>b],55228)},77635,a=>{"use strict";let b=(0,a.i(36580).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],77635)},55558,a=>{"use strict";let b=(0,a.i(36580).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>b],55558)},54316,a=>{"use strict";let b=(0,a.i(36580).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],54316)},12849,(a,b,c)=>{b.exports=a.x("html-to-image-7c851ca803c235e3",()=>require("html-to-image-7c851ca803c235e3"))},28269,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(88910),f=a.i(27669),g=a.i(23830),h=a.i(87959),i=a.i(28280),j=a.i(55228),k=a.i(85030),l=a.i(83399),m=a.i(77635),n=a.i(55558),o=a.i(54316),p=a.i(96604),q=a.i(12849),r=b([g,h]);function s(){let a=(0,e.useRouter)(),{username:b}=a.query,[c,r]=(0,f.useState)([]),[s,t]=(0,f.useState)(!0),[u,v]=(0,f.useState)(!1),[w,x]=(0,f.useState)(null),[y,z]=(0,f.useState)(null);async function A(a=!1){let c=b||localStorage.getItem("username");if(c){a&&v(!0);try{let b=await g.default.post(`/api/admin/message/${encodeURIComponent(c)}`);r(b.data?.messages||[]),a&&h.default.success("Inbox refreshed!")}catch(b){console.error(b),a&&h.default.error("Failed to refresh")}finally{t(!1),a&&v(!1)}}}async function B(){if(w)try{let a=b||localStorage.getItem("username");await g.default.delete(`/api/admin/message/${encodeURIComponent(a)}`,{data:{id:w}}),r(a=>a.filter(a=>a._id!==w)),h.default.success("Message deleted successfully")}catch(a){h.default.error("Failed to delete message: "+(a?.response?.data?.error||a.message))}finally{x(null)}}(0,f.useEffect)(()=>{if(!a.isReady)return;A();let c=async()=>{let a=localStorage.getItem("lastAutoMessage"),c=Date.now();if(!a||c-parseInt(a)>18e5)try{let a=b||localStorage.getItem("username");if(!a)return;console.log("Triggering auto-message for:",a),await g.default.post("/api/admin/auto-message",{username:a}),localStorage.setItem("lastAutoMessage",c.toString()),A(!1),(0,h.default)("Someone sent you a secret... ðŸ‘»",{icon:"ðŸ‘»"})}catch(a){console.error("Auto-message failed:",a)}};c();let d=setInterval(c,6e4);return()=>clearInterval(d)},[a.isReady,b]);let C=async a=>{z(a),setTimeout(async()=>{let a=document.getElementById("story-card-capture");if(a){try{let b=await (0,q.toPng)(a,{quality:.95,pixelRatio:2}),c=document.createElement("a");c.download=`desi-ngl-story-${Date.now()}.png`,c.href=b,c.click(),h.default.success("Story saved to gallery!")}catch(a){console.error(a),h.default.error("Failed to generate image")}z(null)}},100)};return(0,d.jsxs)("div",{className:"container",style:{padding:"40px 20px",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[w&&(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>x(null),children:(0,d.jsxs)("div",{style:{background:"var(--surface-color)",border:"1px solid var(--glass-border)",padding:"30px",borderRadius:"24px",maxWidth:"400px",width:"90%",textAlign:"center",boxShadow:"0 20px 50px rgba(0,0,0,0.5)"},onClick:a=>a.stopPropagation(),children:[(0,d.jsx)("div",{style:{background:"rgba(255, 68, 68, 0.1)",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:(0,d.jsx)(i.Trash2,{size:30,color:"#ff4444"})}),(0,d.jsx)("h3",{style:{marginTop:0,fontSize:"24px",fontWeight:700},children:"Delete Secret?"}),(0,d.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"30px"},children:"Are you sure you want to delete this message? This action cannot be undone."}),(0,d.jsxs)("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[(0,d.jsx)("button",{onClick:()=>x(null),style:{padding:"12px 24px",borderRadius:"12px",border:"1px solid var(--glass-border)",background:"transparent",color:"white",fontWeight:600,cursor:"pointer"},children:"Cancel"}),(0,d.jsx)("button",{onClick:B,style:{padding:"12px 24px",borderRadius:"12px",border:"none",background:"#ff4444",color:"white",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]})}),y&&(0,d.jsxs)("div",{id:"story-card-capture",style:{position:"fixed",top:0,left:"-1000vw",width:"1080px",height:"1920px",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"Outfit, sans-serif",zIndex:-1},children:[(0,d.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 70%)"}}),(0,d.jsxs)("div",{style:{marginBottom:"60px",display:"flex",alignItems:"center",gap:"15px",zIndex:1},children:[(0,d.jsx)("div",{style:{background:"var(--accent-purple)",padding:"15px",borderRadius:"50%"},children:(0,d.jsx)(p.Zap,{size:48,color:"white",fill:"white"})}),(0,d.jsxs)("h1",{style:{fontSize:"64px",fontWeight:800,color:"white",margin:0,letterSpacing:"-2px"},children:["Desi",(0,d.jsx)("span",{className:"text-gradient-primary",children:"NGL"})]})]}),(0,d.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(40px)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"60px",padding:"80px 60px",width:"800px",minHeight:"600px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0 40px 100px rgba(0,0,0,0.5)",zIndex:1},children:[(0,d.jsxs)("div",{style:{background:"rgba(255,255,255,0.1)",padding:"12px 30px",borderRadius:"100px",marginBottom:"40px",display:"flex",alignItems:"center",gap:"15px"},children:[(0,d.jsx)(m.User,{size:32,color:"#fff"}),(0,d.jsx)("span",{style:{fontSize:"24px",fontWeight:600,color:"rgba(255,255,255,0.8)"},children:"Anonymous"})]}),y.mood&&(0,d.jsx)("div",{style:{background:"var(--accent-purple)",color:"white",padding:"10px 30px",borderRadius:"100px",fontSize:"20px",fontWeight:700,marginBottom:"60px",textTransform:"uppercase",letterSpacing:"2px"},children:y.mood}),(0,d.jsxs)("div",{style:{fontSize:"48px",fontWeight:600,color:"white",textAlign:"center",lineHeight:1.4,marginBottom:"40px"},children:['"',y.message,'"']})]}),(0,d.jsxs)("div",{style:{marginTop:"80px",textAlign:"center",zIndex:1},children:[(0,d.jsx)("p",{style:{fontSize:"32px",color:"rgba(255,255,255,0.6)",margin:0},children:"Send me a secret message! ðŸ¤«"}),(0,d.jsx)("div",{style:{marginTop:"20px",background:"rgba(255,255,255,0.1)",padding:"20px 40px",borderRadius:"20px",fontSize:"28px",fontWeight:600,color:"var(--accent-purple)"},children:"Link in Bio ðŸ”—"})]})]}),(0,d.jsxs)("div",{className:"nav-container mobile-stack",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px",flexWrap:"wrap",gap:"15px"},children:[(0,d.jsxs)("h1",{style:{fontSize:"32px",margin:0,fontWeight:800},children:["Inbox ",(0,d.jsx)("span",{style:{fontSize:"18px",verticalAlign:"middle",background:"var(--accent-purple)",padding:"2px 8px",borderRadius:"10px",color:"white"},children:c.length})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,d.jsxs)("button",{onClick:()=>A(!0),disabled:u,style:{background:"var(--surface-color)",border:"1px solid var(--glass-border)",color:"white",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",cursor:u?"wait":"pointer"},children:[(0,d.jsx)(j.RefreshCcw,{size:16,className:u?"spin":"",style:{transition:"transform 1s",transform:u?"rotate(360deg)":"none"}}),"Refresh"]}),(0,d.jsxs)("button",{onClick:function(){localStorage.clear(),a.push("/")},style:{background:"rgba(255,255,255,0.1)",border:"none",color:"white",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"},children:[(0,d.jsx)(k.LogOut,{size:16})," Logout"]})]})]}),s?(0,d.jsx)("div",{style:{textAlign:"center",marginTop:"50px",color:"var(--text-secondary)"},children:"Loading secrets..."}):0===c.length?(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"50px",color:"var(--text-secondary)"},children:[(0,d.jsx)("div",{style:{marginBottom:"20px",display:"inline-flex",padding:"20px",borderRadius:"50%",background:"rgba(255,255,255,0.05)"},children:(0,d.jsx)(l.Inbox,{size:48,color:"var(--text-secondary)"})}),(0,d.jsx)("p",{children:"No confessions yet!"}),(0,d.jsx)("p",{style:{fontSize:"14px"},children:"Share your link to get started."})]}):(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:c.map(a=>(0,d.jsxs)("div",{style:{background:"var(--surface-color)",border:"1px solid var(--glass-border)",borderRadius:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.2s",cursor:"default",position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},onMouseEnter:a=>a.currentTarget.style.transform="translateY(-2px)",onMouseLeave:a=>a.currentTarget.style.transform="translateY(0)",children:[(0,d.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid var(--glass-border)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255,255,255,0.02)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,d.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--accent-purple)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:(0,d.jsx)(m.User,{size:16})}),(0,d.jsx)("span",{style:{fontWeight:700,fontSize:"14px"},children:"Anonymous"})]}),(0,d.jsx)("div",{style:{fontSize:"11px",padding:"4px 10px",borderRadius:"100px",background:"rgba(255,255,255,0.1)",color:"var(--text-secondary)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:a.mood||"Secret"})]}),(0,d.jsx)("div",{style:{padding:"24px",fontSize:"18px",lineHeight:"1.6",color:"var(--text-primary)",whiteSpace:"pre-wrap",fontWeight:500,flex:1},children:a.message}),(0,d.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid var(--glass-border)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255,255,255,0.02)"},children:[(0,d.jsx)("div",{style:{display:"flex",gap:"8px"},children:["ðŸ”¥","â¤ï¸","ðŸ˜‚"].map((a,b)=>(0,d.jsx)("button",{style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",padding:"4px",borderRadius:"50%",transition:"transform 0.1s"},onMouseDown:a=>a.currentTarget.style.transform="scale(0.8)",onMouseUp:a=>a.currentTarget.style.transform="scale(1)",children:a},b))}),(0,d.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,d.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(`Check out this anonymous message I got on Desi-Ngl! 

"${a.message}"

Send me one too!`),h.default.success("Copied for Story!")},style:{background:"var(--text-primary)",color:"var(--bg-color)",border:"none",padding:"8px 16px",borderRadius:"12px",fontSize:"13px",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:["Reply ",(0,d.jsx)(n.Share2,{size:14})]}),(0,d.jsx)("button",{onClick:()=>C(a),style:{background:"rgba(255, 255, 255, 0.1)",color:"#fff",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},title:"Share to Story",onMouseEnter:a=>a.currentTarget.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:a=>a.currentTarget.style.background="rgba(255, 255, 255, 0.1)",children:(0,d.jsx)(o.Download,{size:16})}),(0,d.jsx)("button",{onClick:()=>{var b;return b=a._id,void x(b)},style:{background:"rgba(255, 0, 0, 0.1)",color:"#ff4444",border:"none",borderRadius:"12px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},title:"Delete message",children:(0,d.jsx)(i.Trash2,{size:16})})]})]})]},a._id))})]})}[g,h]=r.then?(await r)():r,a.s(["default",()=>s]),c()}catch(a){c(a)}},!1),42020,a=>a.a(async(b,c)=>{try{var d=a.i(74831),e=a.i(60136),f=a.i(77386),g=a.i(98222),h=a.i(77745),i=a.i(28269),j=a.i(9009),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/message/[username]",pathname:"/admin/message/[username]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/message/[username]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__7e2b5cd5._.js.map